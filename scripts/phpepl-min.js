(function(e,t,n,r){"use strict";if(!n)throw new Error("jquery not found");if(!e.ace)throw new Error("ace not found");var i=e.ace,s,o="http://localhost:8888/eval/index.php",u="http://phpepl.cloudcontrolled.com/eval/index.php",a=function(e){var t=!!arguments[1],r=n(".output span");r.html(e).removeClass("error");t&&r.addClass("error")},f=function(e){n(".ace_gutter-cell").each(function(t){if(Number(n(this).html())===e){n(this).addClass("error-gutter");return}})},l=function(){var e=s.getValue();if(!e.length){a("Please supply some code...");return}n(".spinner").fadeIn("fast");n.ajax({type:"POST",url:u,data:{code:e},dataType:"json",success:function(e){if(!e)return;var t=e.result,r=e.error,i;n(".spinner").fadeOut("fast");if(r){f(r.line);i="Line "+r.line+": "+r.message;a(i,!0);return}a(t)},error:function(e,t,r){n(".spinner").fadeOut("fast");a("Whoopsie daisies!")}})};n(function(){s=i.edit("editor");s.setTheme("ace/theme/textmate");s.getSession().setMode("ace/mode/php");n(".submit button").click(function(){l()});n(t).keydown(function(e){if(e.which===13&&(e.ctrlKey||e.metaKey)){l();e.preventDefault()}});if(e.localStorage){var r=localStorage.getItem("code"),o=r?r:'echo "PHPepl";';s.setValue(o)}n(e).unload(function(){if(e.localStorage){var t=s.getValue();localStorage.setItem("code",t)}})})})(window,document,window.jQuery);